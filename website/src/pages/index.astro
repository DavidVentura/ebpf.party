---
import Layout from "../layouts/Layout.astro";
import { CONTENT_METADATA } from "../lib/exercises-metadata";

const chapters = CONTENT_METADATA.chapters;
---

<Layout>
  <div class="home">
    <h1>eBPF Exercises</h1>
    {
      chapters.map((chapter) => (
        <section class="chapter">
          <h2>
            <span class="chapter-number">Chapter {chapter.number}:</span>{" "}
            {chapter.title}
          </h2>
          <ul>
            {chapter.exercises.map((exercise) => {
              const url = `/exercises/${chapter.slug}/${exercise.slug}`;
              return (
                <li>
                  {exercise.incomplete && !import.meta.env.DEV ? (
                    <span>{exercise.title} (coming soon)</span>
                  ) : (
                    <a href={url}>{exercise.title}</a>
                  )}
                </li>
              );
            })}
          </ul>
        </section>
      ))
    }
  </div>
</Layout>

<style>
  .home {
    padding: 2rem;
    max-width: 800px;
    margin: 0 auto;
    min-height: 100vh;
  }

  h1 {
    margin-bottom: 2rem;
    color: var(--color-text-primary);
  }

  .chapter {
    margin-bottom: 2rem;
  }

  .chapter h2 {
    color: var(--color-text-primary);
    font-size: 1.25rem;
    margin-bottom: 0.5rem;
  }

  .chapter-number {
    color: var(--color-accent);
    font-weight: 600;
  }

  ul {
    list-style: none;
    padding: 0;
    margin-left: 1rem;
  }

  li {
    margin: 0.5rem 0;
  }

  a {
    color: #0066cc;
    text-decoration: none;
    font-size: 1rem;
  }

  a:hover {
    text-decoration: underline;
  }
</style>
